language: android
sudo: false
jdk: oraclejdk7

global:
  env:
    secure: up0ng0BtE2xgUiyLIuBRdMs4lXo1A1QwJuAz9uLBYBDfiYle0TCS/DfKVsFhM3Ts8Dvw6s/CR98/vm6klskX8D3UpraaNOxWYF1WmAg12SGSA7pKBrKHXvWABs8xnu0Nu2jY11+qv9BKgA79Nd05/ZReHmW7UG5yrPx+M+0rIYRK8tUdJjDfahNJQgHxrWLho82adVaAr/IpU+tucOSbeeioRhcohO/gTRyTdqQtqux0j1IJEenX0onnN5gFCn7Px+bkOgniQol3TymhA3XQXd/t/9qrFGi4uxi/t4iid6Zq4RAnuzi4IRw1mG03ePGqZNyNkGgTkv+uDwsrs+oUfFl/Pm03yLync0ZcaQCfClg3Xi5QdZwbTA3e3tegsJW37KbaYjvZk+Wkg93VjPoh0zNsfqHxAq2kWXX/khv/erd13PHp2rOG73ZORudgGZfwRrhdC2sexyNCvOwIMD6a/o/5vx8rFO/TnQwSz4lqk8wVIiC6iy/jbKBXtftBVCZHRXZ/935YoDqdDgrYq1iIPZSXs1Gj9JGKqg9/InAGIZqB+FXnJZYzzJjYIJpYpCzVSyn7o8ZttTDvCZjYpa1g9n2lcTML/kiHXbsuZOXW/Waw+zutW1L22tyaz7pdAyHxdGv7jt6XMEik+aZ2AZuIE7mwB9N1XizXdSbOc7DW1qc=

android:
  components:
  - build-tools-23.0.1
  - android-23
  - extra-google-m2repository
  - extra-android-m2repository
  - extra-android-support
  - addon-google_apis-google-23

notifications:
  email: hwa.hyeon@insertcoin.me

addons:
  apt_packages:
  - swig

before_install:
  - chmod +x gradlew
  - git clone https://github.com/urho3d/android-ndk.git $HOME/android-ndk-root
  - export ANDROID_NDK_HOME=$HOME/android-ndk-root
  - echo "sdk.dir=$ANDROID_HOME" > travisci.properties
  - echo "ndk.dir=$ANDROID_NDK_HOME" >> travisci.properties
  - echo "swig.path=`which swig`" >> travisci.properties
  - echo "ndk.debug=true" >> travisci.properties
  - cat travisci.properties

install:
  - git config --global user.email "hwa.hyeon@insertcoin.me"
  - git config --global user.name "musiczoa"
  - git config --global user.password ${GIT_PASSWORD}

script:
  - ./gradlew build

  - git config --global user.email "hwa.hyeon@insertcoin.me"
  - git config --global user.name "musiczoa"
  - git config --global user.password ${GIT_PASSWORD}

  #- git add .
  #- git commit -m "tagged commit test"
  - git tag 1.0.5
  - git push -u origin --tags

deploy:
  provider: releases
  api_key:
    secure: BKCe/X7nlIZRbis/QX8NK2lNovQ3B12ihSOk50UKOJiRb2vZEyaVVDWUuxIAFMLC4si8NHpHmFeCosAgmQ+q+E1jAkAl74UwC5z+KhotgcDpFzrIZMGq2q1rk5M3rWvNPDnKt0CcOxohZJk0VbfAdPucITV07KlsYxl7SlFcXrfTaUu82hEEDQ27dHn6qc8Yt9riXokKEkndLdvDXLYc2ul4vRy2mBkjJVyKv2QD3lUnHJTr3pTMR91QxO5vBOF6rDec1uEK9ZlrMfheiiUILnQRY5Hwlx7SdV9KkuabAkba9HDVKNXb4kG/BT3y2Is2nRjh8rq8Eo6Ye2DPvawgdw8Yn7DP3bGB2M1QeJPYyEsjlku7rZDHiOwXkaU4RZkdgBLSaw22pr7sUygmgib8uOMhvl/ymJAopfzQrcXni/j1FUY/vVt2K84fSo7zsB2zthoos1ruhBHizlRBmJXn3N8Xtcauylw5OcU0MIQFzkF2mXZ5DlSAtglU+ggiQPTRbizWI9FvG+Y61obf6yZ+0TW+DaX7Uml0M8ctc6KIIDG3f2sc+IF27K5VkuNcXwqNtcIjuemvSe94wODFNqbrwyH1btzXXHcXuK5dIt9TTKEm/hHfJiVBLtkzKIgVOdv8gwluYKB2MdrbYY0L5Udkkv0JYv42m5r/Vpsv5NWCZ74=
  file: "/app/build/outputs/apk/app-release.apk"
  skip_cleanup: true
  on:
    tags: true
    #all_branches: true
    repo: musiczoa/HelloMachineTravis