language: android
#sudo: true
jdk: oraclejdk7

env:
  global:
    - GH_REF: github.com/musiczoa/HelloMachineTravis.git
    - secure: ag9ZY3NnzctygjaMvTRfNTe4BUiz8VsJCiTYb0sCj7dL9G7hzC3zUady2W7ZcutOh2bMVPNQOLCcM2fE7F6HUkaVy6ykQOnPcxbREI1TSc8Bmg6uN2XVHxFDxFVM/PAAvndwCxgnVBlosdAnkM9VPXoO/12KbjDzXLasQgTnCjCaAZURHoPuePSKoDXokpu1OLD9z595Vvrp01iqLAt4rgx1+D/IgOEfBPRMqKg3/Ck/64kQBquBttuXDi0KzxdMMRlAs7+lQ4IsCTbftJ0l72YoXrIzNOP1LOOXN6ho26+Qn5HwyXAIHjwbJS1NF2Kr+EL6iWBaDVnHFbrVfph6RSjy7/HUCgHUPORLPg9GhaTrquQsVtZQWx76O0Hdr7PNWAXDeD0EswvGHx4p3ZNdO0sOrcWW31Si7GLsHNPQVw8hvFuJRaxw4IPvLlwfqnOcymVlek6Hi51hEDUCyYwHxmiENnJGVbdpslNmKkdJTXPIDBsflQWw+LWOPJCFo3WsKcRYUSJRo5v1Q58MHOzDANF6P2fvEi9lcs6tJqUXzlikGICzpwEsM3+MgGoPqaeRBcZYHXbcySoQGyGG2wQ3blXP1gqbH3lo1pRUyqZ0a65Ch5UhGMj8/2JTi7v3YQrXDrjeBfccVBB9XeSX89hGVKadakuRpjVZm7V4dt2MVpE=

android:
  components:
  - build-tools-23.0.1
  - android-23
  - extra-google-m2repository
  - extra-android-m2repository

notifications:
  email: hwa.hyeon@insertcoin.me

addons:
  apt_packages:
  - swig

before_install:
  - chmod +x gradlew
  - git clone https://github.com/urho3d/android-ndk.git $HOME/android-ndk-root
  - export ANDROID_NDK_HOME=$HOME/android-ndk-root
  - echo "sdk.dir=$ANDROID_HOME" > travisci.properties
  - echo "ndk.dir=$ANDROID_NDK_HOME" >> travisci.properties
  - echo "swig.path=`which swig`" >> travisci.properties
  - echo "ndk.debug=true" >> travisci.properties
  - cat travisci.properties

script:
  - "./gradlew build check"

after_success:
  - bash ./after_success.sh

deploy:
  - provider: releases
    api_key:
      secure: QJJk38caP6XLRffzK2vwzR5Xk0uczOvVXkwNcRQ0lkxlcDWwMb0FwGkOrqkoGP6Sw5kuCPVeJbiJ0qrH8wop81jJwruNqYc8HKFW9KteNp7/Ly5OhyK2XsJ43njyd8zpWWlp7KvNlSWebSFcVkVenuwmi0PXsh98GEjh08DTIteG6ymjalRYP+m896fjzRhSta+081eN3fx5lIRRh6i3hGY5nriU8HCG0scQYDzWlni+rZUHmQc0NFFMvCoityYCvD8kRAdugs6HF1vC+Ngpg4GPjnFPG6rBCBKgm/U8HST7L6+sVd7A1V5WV1yG5JM4OabVXOlcly0wpNino7NKsPUEO5sbULyeq/RWYda5G1+HUMQkBaSxaB27+YyDNiL2Nr/Hi/nBe/tjcsHcWEiMbS34xN5REX44zI4cqUkHRHG+cUPo+++virOX0LGLh17PIbo5bM2AW0s02NIY5ODBddBIetTqbpSr9xn6Y8bYnRXAV9hmaaHLh9VT5Hv1zGhbZaUwimnbALD+f7wUuxsvbUtVbysCdBMKXYaUQJgSDHPj469oq432G+WQDA1tUhzs8hhDGBoF3n8AgwCsAKHxofUBi1mDfMELHxYxP1GLJyV+GWsZDBDCTnw9Wz48RjFzr4Lbq0mLNMqSWyOtlcBKHUMpULBh9gUxIs5AdemEnl4=
    #file_glob: true
    file: app/build/outputs/apk/app-release.apk
    #file: "${RELEASE_PKG_FILE}"
    skip_cleanup: true
    on:
      repo: musiczoa/helloMachineTravis
      tags: true